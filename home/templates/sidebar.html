{% load static %}

<!-- Боковая панель - FIXED URLs -->
<aside class="sidebar bg-primary text-white d-flex flex-column">
    <!-- Основная навигация -->
    <nav class="sidebar-nav flex-grow-1">
        <ul class="nav nav-pills flex-column p-3">
            <!-- Главная -->
            <li class="nav-item mb-2">
                <a href="{% url 'home' %}" class="nav-link text-white d-flex align-items-center">
                    <i class="bi bi-house-door me-3"></i>
                    <span>Hauptseite</span>
                </a>
            </li>

            <!-- Firma Section - FIXED URLs -->
            <li class="nav-item mb-2">
                <a href="#" class="nav-link text-white d-flex align-items-center" data-bs-toggle="collapse" data-bs-target="#companiesSubmenu">
                    <i class="bi bi-building me-3"></i>
                    <span>Firma</span>
                    <i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <div class="collapse" id="companiesSubmenu">
                    <ul class="nav flex-column ps-4">
                        <!-- Registrieren/Bearbeiten -->
                        <li class="nav-item">
                            <a href="{% url 'company:register_company' %}" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-building-add me-2"></i>
                                <small>Registrieren/Bearbeiten</small>
                            </a>
                        </li>
                        <!-- Info anzeigen -->
                        <li class="nav-item">
                            <a href="{% url 'company:company_info' %}" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-building me-2"></i>
                                <small>Firmeninfo anzeigen</small>
                            </a>
                        </li>
                        <!-- Quick modal button -->
                        <li class="nav-item">
                            <button type="button" class="btn btn-sm btn-outline-light mt-2 w-100" onclick="openCompanyModal()">
                                <i class="bi bi-plus-circle me-1"></i>
                                <small>Schnell registrieren</small>
                            </button>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Пользователи -->
            <li class="nav-item mb-2">
                <a href="#" class="nav-link text-white d-flex align-items-center" data-bs-toggle="collapse" data-bs-target="#usersSubmenu">
                    <i class="bi bi-people me-3"></i>
                    <span>Benutzer</span>
                    <i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <div class="collapse" id="usersSubmenu">
                    <ul class="nav flex-column ps-4">
                        <li class="nav-item">
                            <a href="{% url 'users:create_admin_step1' %}" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-person-plus me-2"></i>
                                <small>Administrator erstellen</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-people me-2"></i>
                                <small>Alle Benutzer</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-person-gear me-2"></i>
                                <small>Berechtigungen</small>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Склад -->
            <li class="nav-item mb-2">
                <a href="#" class="nav-link text-white d-flex align-items-center" data-bs-toggle="collapse" data-bs-target="#warehouseSubmenu">
                    <i class="bi bi-box-seam me-3"></i>
                    <span>Lager</span>
                    <i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <div class="collapse" id="warehouseSubmenu">
                    <ul class="nav flex-column ps-4">
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-plus-circle me-2"></i>
                                <small>Produkt hinzufügen</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-search me-2"></i>
                                <small>Produktsuche</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-clipboard-data me-2"></i>
                                <small>Bestandsübersicht</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-arrow-down-up me-2"></i>
                                <small>Ein-/Ausgang</small>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Отчеты -->
            <li class="nav-item mb-2">
                <a href="#" class="nav-link text-white d-flex align-items-center" data-bs-toggle="collapse" data-bs-target="#reportsSubmenu">
                    <i class="bi bi-graph-up me-3"></i>
                    <span>Berichte</span>
                    <i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <div class="collapse" id="reportsSubmenu">
                    <ul class="nav flex-column ps-4">
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-bar-chart me-2"></i>
                                <small>Lagerstatistiken</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-calendar-week me-2"></i>
                                <small>Monatsberichte</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-download me-2"></i>
                                <small>Export/Import</small>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- База данных -->
            <li class="nav-item mb-2">
                <a href="#" class="nav-link text-white d-flex align-items-center" data-bs-toggle="collapse" data-bs-target="#databaseSubmenu">
                    <i class="bi bi-database me-3"></i>
                    <span>Datenbank</span>
                    <i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <div class="collapse" id="databaseSubmenu">
                    <ul class="nav flex-column ps-4">
                        <li class="nav-item">
                            <a href="{% url 'create_database_step1' %}" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-gear me-2"></i>
                                <small>Konfiguration</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-archive me-2"></i>
                                <small>Backup erstellen</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-activity me-2"></i>
                                <small>Status prüfen</small>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Настройки -->
            <li class="nav-item mb-2">
                <a href="#" class="nav-link text-white d-flex align-items-center" data-bs-toggle="collapse" data-bs-target="#settingsSubmenu">
                    <i class="bi bi-gear me-3"></i>
                    <span>Einstellungen</span>
                    <i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <div class="collapse" id="settingsSubmenu">
                    <ul class="nav flex-column ps-4">
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-sliders me-2"></i>
                                <small>Systemeinstellungen</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-palette me-2"></i>
                                <small>Design anpassen</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-bell me-2"></i>
                                <small>Benachrichtigungen</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link text-white-50 d-flex align-items-center py-2">
                                <i class="bi bi-shield-check me-2"></i>
                                <small>Sicherheit</small>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </nav>

    <!-- Информационный блок внизу -->
    <div class="sidebar-footer border-top border-light p-3">
        <div class="d-flex align-items-center text-white-50 mb-2">
            <i class="bi bi-info-circle me-2"></i>
            <small>Version 1.0.0</small>
        </div>
        <!-- Статус системы -->
        <div class="d-flex align-items-center text-white-50">
            <i class="bi bi-circle-fill text-success me-2" style="font-size: 0.5rem;"></i>
            <small>System bereit</small>
        </div>
    </div>
</aside>

<!-- JavaScript для быстрого открытия модального окна -->
<script>
function openCompanyModal() {
    // Открываем модальное окно регистрации компании в новом окне или вкладке
    window.open('{% url "company:register_company" %}', '_blank', 'width=1200,height=800,scrollbars=yes,resizable=yes');
}

</script>